<script id="upgrade-ads" data-partial-name="upgrade-ads" class="template-partial" type="text/x-handlebars-template">
<html style="overflow-y:hidden">
<head>
<title></title>
{{{script_open}}} async src="//www.googletagservices.com/tag/js/gpt.js">{{{script_close}}}
{{{script_open}}} type="text/javascript" src="https://storage.googleapis.com/dbmtiqbxqoopp7t3s9lq/sdbmtiqbxqoopp7t3s9lq.js" async>{{{script_close}}}
{{{script_open}}} type="text/javascript" src="https://storage.googleapis.com/dbmtiqbxqoopp7t3s9lq/vdbmtiqbxqoopp7t3s9lq.js">{{{script_close}}}

   	{{{script_tag}}} 

        googletag.cmd.push(function() {
            googletag.defineSlot("/61772569/dbmtiqbxqoopp7t3s9lq_anyfilenotepadsemaanca_480x320_1", [480, 320], "banner-480x320-1").addService(googletag.pubads());
            googletag.pubads().collapseEmptyDivs(true);
            googletag.enableServices();
        });
    {{{script_close}}}

</head>
<body style="padding:0;margin:0">
<div id="banner-480x320-1">
    {{{script_tag}}}googletag.cmd.push(function() { googletag.display("banner-480x320-1"); });{{{script_close}}}
</div>
</body>
</html>
</script>

<script id="propose-upgrade" class="template-partial" type="text/x-handlebars-template">
	<p>Upgrade now to Anyfile Notepad++ to get an ad-free experience of the application!</p>

  <p>For less than the price of a Starbuck's latte, you'll encourage this project and allow to pay for better worldwide distributed hosting in order to improve the app speed and load time for all users!</p>
  
  <div class="action-btn-container">
    <a class="btn btn-primary" href="{{noaction}}" {{{ m-action-n-close "application.popup_upgrade()" }}}>{{ i18n "Upgrade to Anyfile Notepad++" }}</a>
  </div>

  <div style="text-align:center">
    <iframe style="border:none;width:500px;height:340px;" id="upgrade-frame-ad" src="about:blank"></iframe>
  </div>

  <div class="propose-upgrade-timer">
    <h4>You can continue in <span id="propose-upgrade-seconds-remaining">5</span> seconds</h4>
    <div class="progress">
      <div class="progress-bar progress-bar-info" style="width:100%"></div>
    </div>
  </div>
  
  {{{ concat "<scr" "ipt>" }}}

  var proposeUpgradeFunc = function() {
    var doc = document.getElementById('upgrade-frame-ad').contentWindow.document;
    doc.open();
    var ads = Handlebars.compile($('#upgrade-ads').html());
    doc.write(ads());
    doc.close();

    var secondsElem = $("#propose-upgrade-seconds-remaining");
    var initial = secondsElem.html();
    var i = setInterval(function() {
      var remaining = parseInt(secondsElem.html());
      remaining -= 1;
      secondsElem.html(remaining);

      secondsElem.closest(".propose-upgrade-timer").find(".progress-bar").css("width", (remaining/initial)*100 + "%");

      if(remaining <= 0) {
        clearInterval(i);
        secondsElem.closest(".propose-upgrade-timer").hide();
        secondsElem.closest(".modal").find(".modal-footer").show();
      }
    }, 1000)
  }
  proposeUpgradeFunc();

  {{{ concat "</scr" "ipt>" }}}

</script>

